% !TEX root=../main.tex


%% Symbols %%

\newbinary{Rhd}           {\blacktriangleright}
\newbinary{Lhd}           {\blacktriangleleft}
\newbinary{moustache}     {\rhd\mkern-5mu\lhd}
\newbinary{blackmoustache}{\Rhd\mkern-8mu\Lhd}
\renewbinary{blacklozenge}{\Lhd\mkern-4mu\Rhd}
\newbinary{boxcirc}       {\square\mkern-10.33mu\circ\mkern+2mu} %\kern-1.25ex\whitebox} %{\ocircle} %{\boxcircle} %{\overline{\whitebox}}
\newbinary{boxpluscirc}   {\boxplus\mkern-10.33mu\circ\mkern+2mu} %{\oplus} %{\dot{\boxplus}} %{\boxbox} %{\overline{\boxplus}}]

\newrelation{colonequals} {:=}

\newmathcommand{exprequiv}{\simeq}
\newmathcommand{nexprequiv}{\not\simeq}
\newmathcommand{taskequiv}{\cong}
\newmathcommand{ntaskequiv}{\not\cong}

\newmathcommand{mapsdown}[rel]
  {\rotatebox[origin=c]{-90}{\ensuremath{\mapsto}}}


%% Arrows %%

\newrelation{too}     {\longrightarrow}
\newrelation{down}    {\downarrow}
\newrelation{Down}    {\Downarrow}
\newrelation{Too}     {\Longrightarrow}
\newrelation{Leadsto}{\raisebox{-0.25ex}{$\leadsto$}\mathllap{\raisebox{+0.25ex}{$\leadsto$}}}


%% Keywords %%

\newkeyword[If]{if}
\newkeyword[Then]{then}
\newkeyword[Else]{else}

\newmacro{Ite}[3]{
  \If #1 \Then #2 \Else #3
}

\newkeyword[Assert]{assert\:}
\newkeyword[Share]{share\:}


%% Values %%

\newvalue[True]  {True}
\newvalue[False] {False}
\newvalue[Not]   {not}

\newvalue[Id]    {id}
\newvalue[Assoc] {assoc}

\newvalue[unit]{\record{}}


%% Types %%

\newtype{Unit}
\newtype{Bool}
\newtype{Int}
\newtype{String}
\newtype[List]{List\;}
\newtype[Task]{Task\;}
\newtype[Reference]{Ref\;}

\newtype{Snack}
\newtype{Location}


%% Inputs %%

\newmacro{send}[2]
  {#1!#2}

\newbinary{Send}     {!}
\newunary {Init}     {\circledast}
\newunary {Kill}     {\ominus}


%% Operators %%

\newunary {Enter}    {\square}
\newunary {Update}   {\boxminus}
\newunary {View}     {\boxcirc}

\newbinary{Pair}     {\blackmoustache}
\newunary {Lift}     {\blacksquare}
\newbinary{Choose}   {\blacklozenge}
\newunary {Fail}     {\lightning}

\newbinary{Trans}    {\bullet}
\newbinary{Step}     {\Rhd}

\newunary {Pool}     {\moustache}
\newbinary{Assign}   {\colonequals}
\newunary {Change}   {\boxplus}
\newunary {Watch}    {\boxpluscirc}

\newbinary{Modify}   {::=}
\newbinary{Select}   {\rhd}
\newunary {Pick}     {\diamond}
\newunary {Branch}   {\blackdiamond}
\newunary {Repeat}   {\backcicle}
\newunary {Forever}  {\circlearrowleft}


%% Observations %%

\newunary {Value}    {\mathcal{V}}
\newunary {Inputs}   {\mathcal{I}}
\newunary {Rendering}{\mathcal{R}}
\newunary {Failing}  {\mathcal{F}}
\newunary {Watching} {\mathcal{W}}
\newunary {Options}  {\mathcal{O}}
\newunary {Labels}   {\mathcal{L}}
\newunary {Sat}      {\mathcal{S}}
\newunary {Hints}    {\mathcal{H}}
\newunary {Generate} {\mathcal{G}}
\newunary {Node}     {\mathcal{N}}


%% Semantics %%

\newrelation{evaluate}  {\mapsdown}
\newrelation{normalize} {\down}
\newrelation{fixate}    {\Down}

\newmacro{handle}[1]    {\overset{#1}{\too}}
\newmacro{interact}[1]  {\overset{#1}{\Too}}
\newmacro{execute}[1]   {\mathrel{\overset{#1}{\Too}\nobreak\strut\mkern-6mu^*}}

\newrelation{symevaluate}  {\rotatebox[origin=c]{-90}{$\mapstochar\kern+0.1em\leadsto$}}
\newrelation{symnormalize} {\rotatebox[origin=c]{-90}{$\leadsto$}}
\newrelation{symfixate}    {\rotatebox[origin=c]{-90}{$\Leadsto$}}

\newmacro{symhandle}[1]    {\underset{#1}{\leadsto}}
\newmacro{syminteract}[1]  {\underset{#1}{\Leadsto}}
\newmacro{simulate}[1]     {\mathrel{\underset{#1}{\Leadsto}\nobreak\strut\mkern-6mu^*}}

%% Helpers %%

\newmacro{var}[1]{\textsf{\textit{#1}}}
\newmacro{fun}{\textsf}
\newmacro{con}{\textsf}
\newmacro{typ}[1]{\textsf{\textsc{#1}}}
\newmacro{seecond}{\textsc}
% \newmacro{impl}{\texttt}
\newmacro{seerule}{\textsc}
